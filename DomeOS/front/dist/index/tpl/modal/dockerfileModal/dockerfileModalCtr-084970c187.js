'use strict';

(function (domeApp, undefined) {
	domeApp.controller('DockerfileModalCtr', DockerfileModalCtr);

	function DockerfileModalCtr($modalInstance, project, $domeProject, $sce) {
		var vm = this;
		$domeProject.projectService.previewDockerfile(project._formartProject()).then(function (res) {
			if (res.data.resultCode == 200) {
				vm.dockerfileTxt = res.data.result ? $sce.trustAsHtml(res.data.result.replace(/[\n\r]/g, '<br/>')) : $sce.trustAsHtml('无数据！');
			} else {
				vm.dockerfileTxt = $sce.trustAsHtml('<h4 class="txt-error">请求失败！</h4><p class="txt-error">错误信息：' + res.data.resultMsg + '</p>');
			}
		}, function () {
			vm.dockerfileTxt = $sce.trustAsHtml('<p class="txt-error">请求失败！</p>');
		});
		vm.cancel = function () {
			$modalInstance.dismiss('cancel');
		};
	}
	DockerfileModalCtr.$inject = ['$modalInstance', 'project', '$domeProject', '$sce'];
})(window.domeApp);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4L3RwbC9tb2RhbC9kb2NrZXJmaWxlTW9kYWwvZG9ja2VyZmlsZU1vZGFsQ3RyLmVzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsQ0FBQyxVQUFDLE9BQUQsRUFBVSxTQUFWLEVBQXdCO0FBQ3hCLFNBQVEsVUFBUixDQUFtQixvQkFBbkIsRUFBeUMsa0JBQXpDLEVBRHdCOztBQUd4QixVQUFTLGtCQUFULENBQTRCLGNBQTVCLEVBQTRDLE9BQTVDLEVBQXFELFlBQXJELEVBQW1FLElBQW5FLEVBQXlFO0FBQ3hFLE1BQUksS0FBSyxJQUFMLENBRG9FO0FBRXhFLGVBQWEsY0FBYixDQUE0QixpQkFBNUIsQ0FBOEMsUUFBUSxlQUFSLEVBQTlDLEVBQXlFLElBQXpFLENBQThFLFVBQVUsR0FBVixFQUFlO0FBQzVGLE9BQUksSUFBSSxJQUFKLENBQVMsVUFBVCxJQUF1QixHQUF2QixFQUE0QjtBQUMvQixPQUFHLGFBQUgsR0FBbUIsSUFBSSxJQUFKLENBQVMsTUFBVCxHQUFrQixLQUFLLFdBQUwsQ0FBaUIsSUFBSSxJQUFKLENBQVMsTUFBVCxDQUFnQixPQUFoQixDQUF3QixTQUF4QixFQUFtQyxPQUFuQyxDQUFqQixDQUFsQixHQUFrRixLQUFLLFdBQUwsQ0FBaUIsTUFBakIsQ0FBbEYsQ0FEWTtJQUFoQyxNQUVPO0FBQ04sT0FBRyxhQUFILEdBQW1CLEtBQUssV0FBTCxDQUFpQiwrREFBK0QsSUFBSSxJQUFKLENBQVMsU0FBVCxHQUFxQixNQUFwRixDQUFwQyxDQURNO0lBRlA7R0FENkUsRUFNM0UsWUFBWTtBQUNkLE1BQUcsYUFBSCxHQUFtQixLQUFLLFdBQUwsQ0FBaUIsZ0NBQWpCLENBQW5CLENBRGM7R0FBWixDQU5ILENBRndFO0FBV3hFLEtBQUcsTUFBSCxHQUFZLFlBQVk7QUFDdkIsa0JBQWUsT0FBZixDQUF1QixRQUF2QixFQUR1QjtHQUFaLENBWDREO0VBQXpFO0FBZUEsb0JBQW1CLE9BQW5CLEdBQTZCLENBQUMsZ0JBQUQsRUFBbUIsU0FBbkIsRUFBOEIsY0FBOUIsRUFBOEMsTUFBOUMsQ0FBN0IsQ0FsQndCO0NBQXhCLENBQUQsQ0FtQkcsT0FBTyxPQUFQLENBbkJIIiwiZmlsZSI6ImluZGV4L3RwbC9tb2RhbC9kb2NrZXJmaWxlTW9kYWwvZG9ja2VyZmlsZU1vZGFsQ3RyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKChkb21lQXBwLCB1bmRlZmluZWQpID0+IHtcblx0ZG9tZUFwcC5jb250cm9sbGVyKCdEb2NrZXJmaWxlTW9kYWxDdHInLCBEb2NrZXJmaWxlTW9kYWxDdHIpO1xuXG5cdGZ1bmN0aW9uIERvY2tlcmZpbGVNb2RhbEN0cigkbW9kYWxJbnN0YW5jZSwgcHJvamVjdCwgJGRvbWVQcm9qZWN0LCAkc2NlKSB7XG5cdFx0bGV0IHZtID0gdGhpcztcblx0XHQkZG9tZVByb2plY3QucHJvamVjdFNlcnZpY2UucHJldmlld0RvY2tlcmZpbGUocHJvamVjdC5fZm9ybWFydFByb2plY3QoKSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRpZiAocmVzLmRhdGEucmVzdWx0Q29kZSA9PSAyMDApIHtcblx0XHRcdFx0dm0uZG9ja2VyZmlsZVR4dCA9IHJlcy5kYXRhLnJlc3VsdCA/ICRzY2UudHJ1c3RBc0h0bWwocmVzLmRhdGEucmVzdWx0LnJlcGxhY2UoL1tcXG5cXHJdL2csICc8YnIvPicpKSA6ICRzY2UudHJ1c3RBc0h0bWwoJ+aXoOaVsOaNru+8gScpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0uZG9ja2VyZmlsZVR4dCA9ICRzY2UudHJ1c3RBc0h0bWwoJzxoNCBjbGFzcz1cInR4dC1lcnJvclwiPuivt+axguWksei0pe+8gTwvaDQ+PHAgY2xhc3M9XCJ0eHQtZXJyb3JcIj7plJnor6/kv6Hmga/vvJonICsgcmVzLmRhdGEucmVzdWx0TXNnICsgJzwvcD4nKTtcblx0XHRcdH1cblx0XHR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2bS5kb2NrZXJmaWxlVHh0ID0gJHNjZS50cnVzdEFzSHRtbCgnPHAgY2xhc3M9XCJ0eHQtZXJyb3JcIj7or7fmsYLlpLHotKXvvIE8L3A+Jyk7XG5cdFx0fSk7XG5cdFx0dm0uY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0JG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG5cdFx0fTtcblx0fVxuXHREb2NrZXJmaWxlTW9kYWxDdHIuJGluamVjdCA9IFsnJG1vZGFsSW5zdGFuY2UnLCAncHJvamVjdCcsICckZG9tZVByb2plY3QnLCAnJHNjZSddO1xufSkod2luZG93LmRvbWVBcHApOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
