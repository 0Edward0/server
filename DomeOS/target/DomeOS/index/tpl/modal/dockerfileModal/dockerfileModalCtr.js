'use strict';

/*
 * @author ChandraLee
 */

(function (domeApp, undefined) {
	domeApp.controller('DockerfileModalCtr', DockerfileModalCtr);

	function DockerfileModalCtr($modalInstance, project, $domeProject, $sce) {
		var vm = this;
		$domeProject.projectService.previewDockerfile(project._formartProject()).then(function (res) {
			if (res.data.resultCode == 200) {
				vm.dockerfileTxt = res.data.result ? $sce.trustAsHtml(res.data.result.replace(/[\n\r]/g, '<br/>')) : $sce.trustAsHtml('无数据！');
			} else {
				vm.dockerfileTxt = $sce.trustAsHtml('<h4 class="txt-error">请求失败！</h4><p class="txt-error">错误信息：' + res.data.resultMsg + '</p>');
			}
		}, function () {
			vm.dockerfileTxt = $sce.trustAsHtml('<p class="txt-error">请求失败！</p>');
		});
		vm.cancel = function () {
			$modalInstance.dismiss('cancel');
		};
	}
	DockerfileModalCtr.$inject = ['$modalInstance', 'project', '$domeProject', '$sce'];
})(window.domeApp);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4L3RwbC9tb2RhbC9kb2NrZXJmaWxlTW9kYWwvZG9ja2VyZmlsZU1vZGFsQ3RyLmVzIl0sIm5hbWVzIjpbImRvbWVBcHAiLCJ1bmRlZmluZWQiLCJjb250cm9sbGVyIiwiRG9ja2VyZmlsZU1vZGFsQ3RyIiwiJG1vZGFsSW5zdGFuY2UiLCJwcm9qZWN0IiwiJGRvbWVQcm9qZWN0IiwiJHNjZSIsInZtIiwicHJvamVjdFNlcnZpY2UiLCJwcmV2aWV3RG9ja2VyZmlsZSIsIl9mb3JtYXJ0UHJvamVjdCIsInRoZW4iLCJyZXMiLCJkYXRhIiwicmVzdWx0Q29kZSIsImRvY2tlcmZpbGVUeHQiLCJyZXN1bHQiLCJ0cnVzdEFzSHRtbCIsInJlcGxhY2UiLCJyZXN1bHRNc2ciLCJjYW5jZWwiLCJkaXNtaXNzIiwiJGluamVjdCIsIndpbmRvdyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztBQUlBLENBQUMsVUFBQ0EsT0FBRCxFQUFVQyxTQUFWLEVBQXdCO0FBQ3hCRCxTQUFRRSxVQUFSLENBQW1CLG9CQUFuQixFQUF5Q0Msa0JBQXpDOztBQUVBLFVBQVNBLGtCQUFULENBQTRCQyxjQUE1QixFQUE0Q0MsT0FBNUMsRUFBcURDLFlBQXJELEVBQW1FQyxJQUFuRSxFQUF5RTtBQUN4RSxNQUFJQyxLQUFLLElBQVQ7QUFDQUYsZUFBYUcsY0FBYixDQUE0QkMsaUJBQTVCLENBQThDTCxRQUFRTSxlQUFSLEVBQTlDLEVBQXlFQyxJQUF6RSxDQUE4RSxVQUFVQyxHQUFWLEVBQWU7QUFDNUYsT0FBSUEsSUFBSUMsSUFBSixDQUFTQyxVQUFULElBQXVCLEdBQTNCLEVBQWdDO0FBQy9CUCxPQUFHUSxhQUFILEdBQW1CSCxJQUFJQyxJQUFKLENBQVNHLE1BQVQsR0FBa0JWLEtBQUtXLFdBQUwsQ0FBaUJMLElBQUlDLElBQUosQ0FBU0csTUFBVCxDQUFnQkUsT0FBaEIsQ0FBd0IsU0FBeEIsRUFBbUMsT0FBbkMsQ0FBakIsQ0FBbEIsR0FBa0ZaLEtBQUtXLFdBQUwsQ0FBaUIsTUFBakIsQ0FBckc7QUFDQSxJQUZELE1BRU87QUFDTlYsT0FBR1EsYUFBSCxHQUFtQlQsS0FBS1csV0FBTCxDQUFpQiwrREFBK0RMLElBQUlDLElBQUosQ0FBU00sU0FBeEUsR0FBb0YsTUFBckcsQ0FBbkI7QUFDQTtBQUNELEdBTkQsRUFNRyxZQUFZO0FBQ2RaLE1BQUdRLGFBQUgsR0FBbUJULEtBQUtXLFdBQUwsQ0FBaUIsZ0NBQWpCLENBQW5CO0FBQ0EsR0FSRDtBQVNBVixLQUFHYSxNQUFILEdBQVksWUFBWTtBQUN2QmpCLGtCQUFla0IsT0FBZixDQUF1QixRQUF2QjtBQUNBLEdBRkQ7QUFHQTtBQUNEbkIsb0JBQW1Cb0IsT0FBbkIsR0FBNkIsQ0FBQyxnQkFBRCxFQUFtQixTQUFuQixFQUE4QixjQUE5QixFQUE4QyxNQUE5QyxDQUE3QjtBQUNBLENBbkJELEVBbUJHQyxPQUFPeEIsT0FuQlYiLCJmaWxlIjoiaW5kZXgvdHBsL21vZGFsL2RvY2tlcmZpbGVNb2RhbC9kb2NrZXJmaWxlTW9kYWxDdHIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBAYXV0aG9yIENoYW5kcmFMZWVcclxuICovXHJcblxyXG4oKGRvbWVBcHAsIHVuZGVmaW5lZCkgPT4ge1xyXG5cdGRvbWVBcHAuY29udHJvbGxlcignRG9ja2VyZmlsZU1vZGFsQ3RyJywgRG9ja2VyZmlsZU1vZGFsQ3RyKTtcclxuXHJcblx0ZnVuY3Rpb24gRG9ja2VyZmlsZU1vZGFsQ3RyKCRtb2RhbEluc3RhbmNlLCBwcm9qZWN0LCAkZG9tZVByb2plY3QsICRzY2UpIHtcclxuXHRcdGxldCB2bSA9IHRoaXM7XHJcblx0XHQkZG9tZVByb2plY3QucHJvamVjdFNlcnZpY2UucHJldmlld0RvY2tlcmZpbGUocHJvamVjdC5fZm9ybWFydFByb2plY3QoKSkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcblx0XHRcdGlmIChyZXMuZGF0YS5yZXN1bHRDb2RlID09IDIwMCkge1xyXG5cdFx0XHRcdHZtLmRvY2tlcmZpbGVUeHQgPSByZXMuZGF0YS5yZXN1bHQgPyAkc2NlLnRydXN0QXNIdG1sKHJlcy5kYXRhLnJlc3VsdC5yZXBsYWNlKC9bXFxuXFxyXS9nLCAnPGJyLz4nKSkgOiAkc2NlLnRydXN0QXNIdG1sKCfml6DmlbDmja7vvIEnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR2bS5kb2NrZXJmaWxlVHh0ID0gJHNjZS50cnVzdEFzSHRtbCgnPGg0IGNsYXNzPVwidHh0LWVycm9yXCI+6K+35rGC5aSx6LSl77yBPC9oND48cCBjbGFzcz1cInR4dC1lcnJvclwiPumUmeivr+S/oeaBr++8micgKyByZXMuZGF0YS5yZXN1bHRNc2cgKyAnPC9wPicpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHZtLmRvY2tlcmZpbGVUeHQgPSAkc2NlLnRydXN0QXNIdG1sKCc8cCBjbGFzcz1cInR4dC1lcnJvclwiPuivt+axguWksei0pe+8gTwvcD4nKTtcclxuXHRcdH0pO1xyXG5cdFx0dm0uY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcclxuXHRcdH07XHJcblx0fVxyXG5cdERvY2tlcmZpbGVNb2RhbEN0ci4kaW5qZWN0ID0gWyckbW9kYWxJbnN0YW5jZScsICdwcm9qZWN0JywgJyRkb21lUHJvamVjdCcsICckc2NlJ107XHJcbn0pKHdpbmRvdy5kb21lQXBwKTsiXX0=
